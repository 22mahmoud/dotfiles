#!/bin/sh

if [ "$1" = "inc" ]; then
  amixer -D pipewire sset Master 5%+
fi

if [ "$1" = "dec" ]; then
  amixer -D pipewire sset Master 5%-
fi

if [ "$1" = "toggle" ]; then
  amixer -D pipewire set Master toggle
fi

is_mute=$(amixer -D pipewire sget Master | awk -F"[][]" '/Left:/ { print $4 }')
volume=$(amixer -D pipewire sget Master | awk -F"[][]" '/Left:/ { print $2 }' | sed 's/.$//')

# ICON=
if [ "$is_mute" = 'off' ]; then
  icon=ðŸ”‡
elif [ "$volume" -gt 70 ]; then
  icon=ðŸ”Š
elif [ "$volume" -gt 30 ]; then
  icon=ðŸ”‰
elif [ "$volume" -gt 0 ]; then
  icon=ðŸ”ˆ
else
  icon=ðŸ”‡
fi

dunstify \
  -t 1500 \
  -u low \
  "$icon Sound" "Volume: ${volume}%" \
  -h string:x-canonical-private-synchronous:"changeVolume"
